stages:
  prepare-s2orc:
    cmd: python scripts/s2orc/prepare_full_csv.py
    deps:
    - mars/s2orc/metadata/ai/
    - scripts/s2orc/prepare_full_csv.py
    outs:
    - data/s2orc/s2orc_ai_prefiltered.csv
  process-spacy-s2orc:
    cmd: python scripts/s2orc/process_spacy_docs.py
    deps:
    - data/s2orc/s2orc_ai_prefiltered.csv
    - scripts/s2orc/process_spacy_docs.py
    outs:
    - data/s2orc/s2orc_ai_prefiltered_processed_with_doi.pkl
  extract-phrases-s2orc:
    cmd: python scripts/s2orc/extract_phrases.py
    deps:
    - scripts/s2orc/extract_phrases.py
    - data/s2orc/s2orc_ai_prefiltered_processed_with_doi.pkl
    outs:
    - data/s2orc/extracted_phrases.csv
